# TTN-TECO-6.2KW Dongle –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —ñ–Ω–≤–µ—Ä—Ç–æ—Ä–∞

–¶–µ–π –ø—Ä–æ—î–∫—Ç ‚Äî –∞–ø–∞—Ä–∞—Ç–Ω–æ-–ø—Ä–æ–≥—Ä–∞–º–Ω–∏–π –¥–æ–Ω–≥–ª –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —ñ–Ω–≤–µ—Ä—Ç–æ—Ä–∞ TTN TECO 6.2KW —á–µ—Ä–µ–∑ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å RS232 –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –ø–ª–∞—Ç–∏ ESP32-C3 SuperMini.

## üîß –°–∫–ª–∞–¥–æ–≤—ñ

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å | –ü–æ—Å–∏–ª–∞–Ω–Ω—è |
|----------|------|-----------|
| ESP32-C3 SuperMini | –ì–æ–ª–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä –∑ Wi-Fi | [–ü–æ—Å–∏–ª–∞–Ω–Ω—è](https://www.aliexpress.com/item/1005007479144456.html) |
| RS232 TTL MAX3232 | –ü—Ä–µ–æ–±—Ä–∞–∑—É–≤–∞—á —Ä—ñ–≤–Ω—ñ–≤ –¥–ª—è RS232 ‚Üî TTL | [–ü–æ—Å–∏–ª–∞–Ω–Ω—è](https://www.aliexpress.com/item/4000370825055.html) |
| DC-DC –ø–µ—Ä–µ—Ç–≤–æ—Ä—é–≤–∞—á | –ó–Ω–∏–∂–µ–Ω–Ω—è –Ω–∞–ø—Ä—É–≥–∏ 12‚Äì24V ‚Üí 5V 3A | [–ü–æ—Å–∏–ª–∞–Ω–Ω—è](https://www.aliexpress.com/item/1005007092498838.html) |

https://github.com/srepenko/esphome-solar-inverter/blob/main/components/solar_inverter/img/0-02-05-2faf52d0b74a87d8961dcf2dfb64cb0b8cecf41dd8493fadb3c749a5221d0289_a2796bc580be1cd5.jpg

## ‚öôÔ∏è –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è

–¶–µ–π –¥–æ–Ω–≥–ª –¥–æ–∑–≤–æ–ª—è—î:

- –∑—á–∏—Ç—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ –∑ —ñ–Ω–≤–µ—Ä—Ç–æ—Ä–∞ TTN-TECO —á–µ—Ä–µ–∑ UART/RS232;
- –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –¥–∞–Ω—ñ –≤ Home Assistant —á–µ—Ä–µ–∑ ESPHome;
- –≤–µ—Å—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–∏–π –∞–±–æ —Ö–º–∞—Ä–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –µ–Ω–µ—Ä–≥—ñ—ó.

## üõ†Ô∏è –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

1. **–ñ–∏–≤–ª–µ–Ω–Ω—è:**
   - 12‚Äì24V –ø–æ–¥–∞—î—Ç—å—Å—è –Ω–∞ –≤—Ö—ñ–¥ DC-DC.
   - –í–∏—Ö—ñ–¥ 5V –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è –¥–æ ESP32-C3.

2. **–ó–≤‚Äô—è–∑–æ–∫:**
   - TX/RX –∑ —ñ–Ω–≤–µ—Ä—Ç–æ—Ä–∞ (RS232) –ø—ñ–¥–∫–ª—é—á–∞—é—Ç—å—Å—è –¥–æ –≤—Ö–æ–¥—É MAX3232.
   - TTL-–≤–∏—Ö–æ–¥–∏ MAX3232 –ø—ñ–¥–∫–ª—é—á–∞—é—Ç—å—Å—è –¥–æ UART ESP32-C3 (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ: RX = GPIO20, TX = GPIO21 –∞–±–æ —ñ–Ω—à—ñ –¥–æ—Å—Ç—É–ø–Ω—ñ –ø–æ—Ä—Ç–∏).

3. **–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–æ—à–∏–≤–∫–∏:**
   - –ü—Ä–æ—î–∫—Ç ESPHome (–¥–∏–≤. –Ω–∏–∂—á–µ).
   - –ú–æ–∂–Ω–∞ –ø—Ä–æ—à–∏—Ç–∏ —á–µ—Ä–µ–∑ `USB-UART` –∞–¥–∞–ø—Ç–µ—Ä –∞–±–æ OTA.

## üì¶ –ü—Ä–æ–≥—Ä–∞–º–Ω–∞ —á–∞—Å—Ç–∏–Ω–∞

–ü—Ä–æ—à–∏–≤–∫–∞ —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∞ –Ω–∞ –±–∞–∑—ñ ESPHome —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º—É—î:

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑—á–∏—Ç—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `QPIGS`;
- –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å–µ–Ω—Å–æ—Ä—ñ–≤ —É Home Assistant;
- MQTT (–æ–ø—Ü—ñ–π–Ω–æ);
- –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑ –∂–∏–≤–∏–º–∏ –¥–∞–Ω–∏–º–∏ (–æ–ø—Ü—ñ–π–Ω–æ).

–î–µ—Ç–∞–ª—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –¥–∏–≤. —É [–∫–∞—Ç–∞–ª–æ–∑—ñ `custom_components/solar_inverter`](custom_components/solar_inverter).

## üßæ –ü—Ä–∏–∫–ª–∞–¥ `ttn-inverter.yaml`

```yaml
substitutions:
  name: ttn-inverter
  inv_id: ttn-inverter
  device_description: "Hybrid inverter via MAX communication"
  external_components_source: github://srepenko/esphome-solar-inverter@main

esphome:
  name: ${name}
  comment: ${device_description}
  min_version: 2024.6.0
  platformio_options:
    board_build.f_flash: 40000000L
    board_build.flash_mode: dio
    board_build.flash_size: 4MB

esp32:
  variant: ESP32C3
  board: seeed_xiao_esp32c3
  framework:
    type: arduino
...

external_components:
  - source: ${external_components_source}
    refresh: 0s

uart:
  id: uart_bus
  tx_pin: GPIO21
  rx_pin: GPIO20
  baud_rate: 2400

solar_inverter:
  uart_id: uart_bus
